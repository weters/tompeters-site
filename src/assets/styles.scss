@use './variables' as *;
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

*, *::before, *::after {
    padding:    0;
    margin:     0;
    box-sizing: border-box;
}

html {
    font-family:              'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    -webkit-text-size-adjust: 100%;
    -moz-text-size-adjust:    100%;
    text-size-adjust:         100%;
    font-feature-settings:    'cv02', 'cv03', 'cv04', 'cv11';
    background-color:         $bg-primary;
    height:                   100%;
    scroll-behavior:          smooth;
}

body {
    color:       $text-primary;
    line-height: 1.6;
    font-size:   16px;
    overflow-x:  hidden;
}

// Typography
h1, h2, h3, h4, h5, h6 {
    font-weight:    600;
    line-height:    1.2;
    letter-spacing: -0.02em;
}

p {
    color: $text-secondary;
}

a {
    color:           $text-primary;
    text-decoration: none;
    transition:      color $transition-fast;

    &:hover {
        color: $accent-primary;
    }
}

// Selection
::selection {
    background: rgba($accent-primary, 0.3);
    color:      $text-primary;
}

// =============================================
// HERO SECTION
// =============================================

section.hero {
    position:       relative;
    min-height:     calc(var(--computed-vh, 1vh) * 100);
    display:        flex;
    flex-direction: column;
    overflow:       hidden;

    // Background with overlay
    &::before {
        content:             '';
        position:            absolute;
        inset:               0;
        background-image:    url(./drone.jpg);
        background-size:     cover;
        background-position: center;
        filter:              brightness(0.5) saturate(0.8);
        z-index:             0;
    }

    // Gradient overlay
    &::after {
        content:    '';
        position:   absolute;
        inset:      0;
        background: linear-gradient(
                                    180deg,
                                    rgba($bg-primary, 0.4) 0%,
                                    rgba($bg-primary, 0.6) 50%,
                                    $bg-primary 100%
                    );
        z-index:    1;
    }

    // Navigation
    nav {
        position: relative;
        z-index:  10;
        padding:  $spacing-md $spacing-lg;

        @include env-padding($spacing-lg);

        @media (max-width: 768px) {
            padding: $spacing-sm $spacing-md;
        }

        ul {
            display:         flex;
            justify-content: flex-end;
            gap:             $spacing-md;
            list-style:      none;
            margin:          0;

            @media (max-width: 768px) {
                gap: $spacing-sm;
            }

            li a {
                font-size:     0.875rem;
                font-weight:   500;
                color:         $text-secondary;
                padding:       $spacing-xs $spacing-sm;
                border-radius: $radius-sm;
                transition:    all $transition-fast;

                &:hover {
                    color:      $text-primary;
                    background: $glass-bg;
                }
            }
        }
    }

    // Header content
    header {
        position:        relative;
        z-index:         10;
        flex:            1;
        display:         flex;
        align-items:     center;
        justify-content: center;
        padding:         $spacing-xl $spacing-lg;
        text-align:      center;

        @media (max-width: 768px) {
            padding: $spacing-lg $spacing-md;
        }

        .content {
            max-width: 800px;

            h1 {
                font-size:      clamp(3rem, 8vw, 5rem);
                font-weight:    700;
                letter-spacing: -0.04em;
                margin-bottom:  $spacing-md;
                @include gradient-text;
            }

            p {
                font-size:     clamp(1rem, 2.5vw, 1.25rem);
                color:         $text-secondary;
                line-height:   1.8;
                margin-bottom: 0;

                a {
                    color:                 $text-primary;
                    font-weight:           500;
                    text-decoration:       underline;
                    text-decoration-color: $accent-primary;
                    text-underline-offset: 3px;
                    transition:            all $transition-fast;

                    &:hover {
                        color:                 $accent-primary;
                        text-decoration-color: transparent;
                    }
                }
            }
        }
    }

    // Scroll indicator
    .chevron {
        position:   absolute;
        bottom:     $spacing-lg;
        left:       50%;
        transform:  translateX(-50%);
        z-index:    10;
        width:      40px;
        height:     40px;
        fill:       $text-muted;
        animation:  bounce 2s infinite;
        cursor:     pointer;
        transition: fill $transition-fast;

        &:hover {
            fill: $text-secondary;
        }
    }
}

@keyframes bounce {
    0%, 20%, 50%, 80%, 100% {
        transform: translateX(-50%) translateY(0);
    }
    40% {
        transform: translateX(-50%) translateY(-10px);
    }
    60% {
        transform: translateX(-50%) translateY(-5px);
    }
}

@keyframes pulse-dot {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
}

// =============================================
// SKILLS/LANGUAGES SECTION
// =============================================

div.languages {
    position:  relative;
    z-index:   5;
    max-width: $max-width;
    margin:    0 auto;
    padding:   $spacing-2xl $spacing-lg;

    @include env-padding($spacing-lg);

    @media (max-width: 768px) {
        padding: $spacing-xl $spacing-md;
    }

    // Section title
    &::before {
        content:        'Expertise';
        display:        block;
        font-size:      0.875rem;
        font-weight:    600;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        color:          $accent-primary;
        margin-bottom:  $spacing-lg;
        text-align:     center;
    }

    section.language {
        background:            $bg-card;
        border:                1px solid $glass-border;
        border-radius:         $radius-xl;
        padding:               $spacing-lg;
        margin-bottom:         $spacing-lg;
        display:               grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap:                   $spacing-lg;
        overflow:              hidden;
        transition:            all $transition-base;
        position:              relative;

        @media (max-width: 900px) {
            grid-template-columns: 1fr;
            gap:                   $spacing-md;
        }

        &:hover {
            border-color: rgba($accent-primary, 0.3);
            box-shadow:   $shadow-glow;
        }

        &:last-child {
            margin-bottom: 0;
        }

        // Accent line
        &::before {
            content:       '';
            position:      absolute;
            top:           0;
            left:          0;
            right:         0;
            height:        3px;
            background:    var(--accent-color, $accent-gradient);
            border-radius: $radius-xl $radius-xl 0 0;
        }

        // Language-specific accents
        &.go { --accent-color: #{$color-go}; }

        &.javascript { --accent-color: #{$color-js}; }

        &.swift { --accent-color: #{$color-swift}; }

        &.perl { --accent-color: #{$color-perl}; }

        &.databases { --accent-color: #{$color-db}; }

        &.containers { --accent-color: #{$color-containers}; }

        // Animation states
        div.details,
        div.code-container {
            opacity:    0;
            transform:  translateY(30px);
            transition: all $transition-slow;
        }

        &.shown {
            div.details,
            div.code-container {
                opacity:   1;
                transform: translateY(0);
            }

            div.code-container {
                transition-delay: 150ms;
            }
        }
    }

    // Alternating layouts
    & > *:nth-child(even) {
        div.code-container {
            order: -1;

            @media (max-width: 900px) {
                order: 0;
            }
        }
    }
}

// Details column
div.details {
    display:         flex;
    flex-direction:  column;
    justify-content: center;

    h2 {
        font-size:     1.75rem;
        font-weight:   700;
        margin-bottom: $spacing-sm;
        display:       inline-flex;
        align-items:   center;
        gap:           $spacing-sm;

        &::before {
            content:       '';
            width:         8px;
            height:        8px;
            background:    var(--accent-color, $accent-primary);
            border-radius: 50%;
        }
    }

    p {
        font-size:     1rem;
        margin-bottom: $spacing-md;
        color:         $text-secondary;
    }

    ul {
        list-style:     none;
        margin:         0;
        display:        flex;
        flex-direction: column;
        gap:            $spacing-sm;

        li {
            position:     relative;
            padding-left: $spacing-md;
            font-size:    0.9375rem;
            color:        $text-secondary;

            &::before {
                content:       '';
                position:      absolute;
                left:          0;
                top:           0.6em;
                width:         6px;
                height:        6px;
                background:    var(--accent-color, $accent-primary);
                border-radius: 2px;
                opacity:       0.6;
            }

            strong {
                color:       $text-primary;
                font-weight: 600;
            }

            a {
                color:                 $text-primary;
                text-decoration:       underline;
                text-decoration-color: rgba($text-primary, 0.3);
                text-underline-offset: 2px;

                &:hover {
                    text-decoration-color: $accent-primary;
                    color:                 $accent-primary;
                }
            }

            code {
                font-family:   'JetBrains Mono', monospace;
                font-size:     0.875em;
                background:    $bg-elevated;
                padding:       2px 6px;
                border-radius: 4px;
            }
        }
    }
}

// Code container
div.code-container {
    position:    relative;
    align-self:  center;
    grid-column: span 2;

    a {
        position:      absolute;
        top:           $spacing-sm;
        right:         $spacing-sm;
        z-index:       10;
        padding:       $spacing-xs;
        background:    $bg-elevated;
        border-radius: $radius-sm;
        opacity:       0;
        transition:    all $transition-fast;

        svg {
            display:    block;
            width:      18px;
            height:     18px;
            fill:       $text-muted;
            transition: fill $transition-fast;
        }

        &:hover svg {
            fill: $text-primary;
        }
    }

    &:hover a {
        opacity: 1;
    }

    span.view-source {
        display: none;
    }

    pre {
        background:    $bg-primary;
        border:        1px solid $glass-border;
        border-radius: $radius-lg;
        padding:       $spacing-md;
        overflow:      auto;
        font-family:   'JetBrains Mono', monospace;
        white-space:   pre-wrap;
        font-size:     0.85rem;
        line-height:   1.7;
        color:         $text-secondary;
        -moz-tab-size: 2;
        tab-size:      2;

        @media (max-width: 1100px) {
            font-size: 0.8125rem;
        }

        @media (max-width: 900px) {
            font-size: 0.75rem;
        }

        @media (max-width: 600px) {
            font-size: 0.6875rem;
            padding:   $spacing-sm;
        }

        // Syntax highlighting
        span {
            color: $text-primary;
        }

        em {
            color:      $text-muted;
            font-style: italic;
        }
    }
}

code {
    font-family: 'JetBrains Mono', monospace;
}

// =============================================
// FOOTER
// =============================================

footer {
    position:   relative;
    padding:    $spacing-xl $spacing-lg;
    text-align: center;
    border-top: 1px solid $glass-border;

    @include env-padding($spacing-lg);

    @media (max-width: 768px) {
        padding: $spacing-lg $spacing-md;
    }

    p {
        font-size:     0.9375rem;
        color:         $text-secondary;
        margin-bottom: $spacing-md;

        &:last-child {
            margin-bottom: 0;
        }

        a {
            color:       $text-primary;
            font-weight: 500;
            transition:  color $transition-fast;

            &:hover {
                color: $accent-primary;
            }
        }
    }

    .social-links {
        display:         flex;
        justify-content: center;
        gap:             $spacing-md;
        margin-bottom:   $spacing-lg;

        a {
            display:         flex;
            align-items:     center;
            justify-content: center;
            width:           44px;
            height:          44px;
            background:      $bg-card;
            border:          1px solid $glass-border;
            border-radius:   $radius-md;
            transition:      all $transition-fast;

            &:hover {
                background:   $bg-elevated;
                border-color: $accent-primary;
                transform:    translateY(-2px);
            }
        }
    }

    p.version {
        margin-top: $spacing-lg;

        a {
            font-family: 'JetBrains Mono', monospace;
            font-size:   0.75rem;
            color:       $text-muted;
            transition:  color $transition-fast;

            &:hover {
                color: $text-secondary;
            }
        }
    }
}

// =============================================
// UTILITIES
// =============================================

.visually-hidden {
    position:    absolute;
    width:       1px;
    height:      1px;
    padding:     0;
    margin:      -1px;
    overflow:    hidden;
    clip:        rect(0, 0, 0, 0);
    white-space: nowrap;
    border:      0;
}

// Smooth scrollbar
::-webkit-scrollbar {
    width: 10px;
}

::-webkit-scrollbar-track {
    background: $bg-primary;
}

::-webkit-scrollbar-thumb {
    background:    $bg-elevated;
    border-radius: 5px;
    border:        2px solid $bg-primary;

    &:hover {
        background: rgba($text-primary, 0.2);
    }
}

// Legacy support
div.slide {
    display: none;
}
